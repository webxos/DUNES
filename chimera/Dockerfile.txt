# --- CUSTOMIZATION POINT: Choose base image ---
# Replace with specific CUDA version or base image (e.g., cuda:12.2.0-devel-ubuntu22.04)
FROM nvidia/cuda:12.0.0-devel-ubuntu22.04

WORKDIR /app

# --- CUSTOMIZATION POINT: Install additional system dependencies ---
# Add packages for your specific use case (e.g., additional libraries)
RUN apt-get update && apt-get install -y \
    python3.10 \
    python3-pip \
    postgresql-client \
    build-essential \
    && rm -rf /var/lib/apt/lists/*

# --- CUSTOMIZATION POINT: Copy and install custom dependencies ---
# Update requirements.txt with your specific packages
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# --- CUSTOMIZATION POINT: Copy additional application files ---
# Add custom scripts, configs, or models
COPY chimera_2048_api_gateway.py .

# --- CUSTOMIZATION POINT: Expose additional ports ---
# Add ports for custom services if needed
EXPOSE 8000 9090 8080

# --- CUSTOMIZATION POINT: Set environment variables ---
# Update or add variables for your environment
ENV NVIDIA_DRIVER_CAPABILITIES=compute,utility,video
ENV CUDA_VISIBLE_DEVICES=0,1,2,3
ENV SQLALCHEMY_DATABASE_URI=postgresql://user:pass@localhost:5432/chimera_hub
ENV PROMETHEUS_MULTIPROC_DIR=/var/lib/prometheus
ENV NVIDIA_CUDA_CORES=enabled
ENV QUANTUM_LOGIC=enabled

# --- CUSTOMIZATION POINT: Define entrypoint ---
# Modify command or add startup scripts
CMD ["python3", "chimera_2048_api_gateway.py"]